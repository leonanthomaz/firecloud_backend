2025-07-30 01:20:52,257 - INFO - CHAT >>> Contexto montado >>> {'user_message': 'como faço pra comprar o curso e como funciona?', 'intents': ['DOUBT', 'OPENING_HOURS'], 'main_intent': 'OPENING_HOURS', 'step': 'START', 'data': {'company': {'name': 'FireCloud', 'chatbot_status': <AssistantStatus.ONLINE: 'ONLINE'>, 'status': <CompanyStatusEnum.ACTIVE: 'ACTIVE'>, 'is_open': <CompanyOpenEnum.OPEN: 'OPEN'>, 'address': 'Rua Antonio Nunes', 'open_work': '09:00 às 18:00', 'work_days': ['Segunda-feira', 'Terça-feira', 'Quarta-feira', 'Quinta-feira', 'Sexta-feira'], 'social_media': {}}, 'assistant': {'name': 'Tainá', 'status': <AssistantStatus.ONLINE: 'ONLINE'>, 'type': 'receptionist', 'model': 'GPT-3.5', 'api_url': 'deepseek/deepseek-prover-v2:free'}, 'services': [{'category_id': 3, 'category_name': 'Cursos', 'services': [{'id': 1, 'name': 'Curso Python Básico', 'description': 'O objetivo deste curso é articular teoria e prática do raciocínio lógico por meio da Linguagem de Programaçãoistant': {'name': 'Tainá', 'status': <AssistantStatus.ONLINE: 'ONLINE'>, 'type': 'receptionist'}}}
2025-07-30 01:20:52,257 - INFO - CHAT >>> Contexto validado por intenções: {'user_message': 'como faço pra comprar o curso e como funciona?', 'intents': ['DOUBT', 'OPENING_HOURS'], 'main_intent': 'OPENING_HOURS', 'step': 'START', 'data': {'company': {'name': 'FireCloud', 'chatbot_status': <AssistantStatus.ONLINE: 'ONLINE'>, 'is_open': <CompanyOpenEnum.OPEN: 'OPEN'>}, 'assistant': {'name': 'Tainá', 'status': <AssistantStatus.ONLINE: 'ONLINE'>, 'type': 'receptionist'}}}
2025-07-30 01:20:52,257 - INFO - CHAT >>> Integridade do contexto validado: {'user_message': 'como faço pra comprar o curso e como funciona?', 'intents': ['DOUBT', 'OPENING_HOURS'], 'main_intent': 'OPENING_HOURS', 'step': 'START', 'data': {'company': {'name': 'FireCloud', 'chatbot_status': <AssistantStatus.ONLINE: 'ONLINE'>, 'is_open': <CompanyOpenEnum.OPEN: 'OPEN'>}, 'assistant': {'name': 'Tainá', 'status': <AssistantStatus.ONLINE: 'ONLINE'>, 'type': 'receptionist'}}}
2025-07-30 01:20:52,258 - INFO - CHAT >>> Dados ANTES de enviar para IA: {'user_message': 'como faço pra comprar o curso e como funciona?', 'intents': ['DOUBT', 'OPENING_HOURS'], 'main_intent': 'OPENING_HOURS', 'step': 'START', 'data': {'company': {'name': 'FireCloud', 'chatbot_status': <AssistantStatus.ONLINE: 'ONLINE'>, 'is_open': <CompanyOpenEnum.OPEN: 'OPEN'>}, 'assistant': {'name': 'Tainá', 'status': <AssistantStatus.ONLINE: 'ONLINE'>, 'type': 'receptionist'}}}
2025-07-30 01:20:52,258 - INFO - Inteligência Artificial escolhida: deepseek
2025-07-30 01:20:52,258 - INFO - IA >>> Inicializado DeepSeek Provider com modelo deepseek/deepseek-chat-v3-0324
2025-07-30 01:20:52,258 - INFO - IA >>> Iniciando geração de resposta...
2025-07-30 01:20:52,258 - INFO - Chamando API em: https://openrouter.ai/api/v1/chat/completions
2025-07-30 01:20:57,212 - INFO - IA >>> Resposta Bruta: {'id': 'gen-1753849252-oAW8gBjrsb1GOZPssk5Q', 'provider': 'DeepInfra', 'model': 'deepseek/deepseek-chat-v3-0324', 'object': 'chat.completion', 'created': 1753849252, 'choices': [{'logprobs': None, 'finish_reason': 'stop', 'native_finish_reason': 'stop', 'index': 0, 'message': {'role': 'assistant', 'content': '```json\n{\n  "user_response": "No momento, não temos cursos disponíveis para compra. Posso te ajudar com alguma outra informação sobre a FireCloud?",\n  "system_response": {\n    "function": "no_action"\n  }\n}\n```', 'refusal': None, 'reasoning': None}}], 'usage': {'prompt_tokens': 987, 'completion_tokens': 56, 'total_tokens': 1043, 'prompt_tokens_details': None}}
2025-07-30 01:20:57,212 - INFO - TOKENS USADOS >>> Prompt: 987, Completion: 56, Total: 1043
2025-07-30 01:20:57,214 - INFO - IA >>> Resposta Formatada: {'type': 'action', 'useful_context': {'user_message': 'como faço pra comprar o curso e como funciona?', 'intents': ['DOUBT', 'OPENING_HOURS'], 'main_intent': 'OPENING_HOURS', 'step': 'START', 'data': {'company': {'name': 'FireCloud', 'chatbot_status': <AssistantStatus.ONLINE: 'ONLINE'>, 'is_open': <CompanyOpenEnum.OPEN: 'OPEN'>}, 'assistant': {'name': 'Tainá', 'status': <AssistantStatus.ONLINE: 'ONLINE'>, 'type': 'receptionist'}, 'services': {}, 'schedule': {}, 'schedule_slots': {}}, 'user_response': 'No momento, não temos cursos disponíveis para compra. Posso te ajudar com alguma outra informintents': ['DOUBT', 'OPENING_HOURS'], 'main_intent': 'OPENING_HOURS', 'step': 'START', 'data': {'company': {'name': 'FireCloud', 'chatbot_status': <AssistantStatus.ONLINE: 'ONLINE'>, 'is_open': <CompanyOpenEnum.OPEN: 'OPEN'>}, 'assistant': {'name': 'Tainá', 'status': <AssistantStatus.ONLINE: 'ONLINE'>, 'type': 'receptionist'}, 'services': {}, 'schedule': {}, 'schedule_slots': {}}, 'user_response': 'No momento, não temos cursos disponíveis para compra. Posso te ajudar com alguma outra inform 'metadata': {'function': 'no_action', 'intent': 'OPENING_HOURS'}}}
2025-07-30 01:20:57,214 - INFO - IA >>> Resposta gerada com sucesso
2025-07-30 01:20:57,215 - INFO - CHAT >>> Dados DEPOIS de enviar para IA: {'useful_context': {'user_response': 'No momento, não temos cursos disponíveis para compra. Posso te ajudar com alguma outra informação sobre a FireCloud?', 'system_response': {'function': 'no_action'}, 'token_usage': {'prompt_tokens': 987, 'completion_tokens': 56, 'total_tokens': 1043, 'prompt_tokens_details': None}, 'timestamp': '2025-07-30T04:20:57.214341+00:00'}, 'status': 200}
INFO:     127.0.0.1:59362 - "POST /chat/company/1 HTTP/1.1" 200 OK